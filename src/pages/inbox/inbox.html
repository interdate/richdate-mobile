<!--
  Generated template for the InboxPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

    <ion-header>
    
      <ion-navbar>
        <ion-title>inbox</ion-title>
      </ion-navbar>
    
    </ion-header>
    
    
    <ion-content padding>
      <div class="no_results" *ngIf="users?.length == 0">אין הודעות</div>
        <ion-list>
            <ion-card *ngFor="let user of users ; let i = index" [attr.data-index]="i" (click)="toDialogPage(user,i)">
                <ion-card-content [ngClass]="{'highlight': user.user.userId==='468385291'}">
                    <div class="usr_img" *ngIf="user.user.mainImage" [ngStyle]="{ 'background-image': 'url('  + user.user.mainImage?.url + ')'}" ></div>
                    <div class="usr_img" *ngIf="user.user.noPhoto" [ngStyle]="{ 'background-image': 'url(' + api.url  + user.noPhoto + ')'}" ></div>
                    <ion-card-title>
                        <div class="name">{{ user.user.nickName }}</div>
                        <div class="date">{{ user.recentMessage.date }}</div>
                    </ion-card-title>
                    <div class="message">
                        <p [innerHTML]="user.recentMessage.text">
                        </p>
                        <div class="counter" *ngIf="user.newMessagesCount > 0" >{{ user.newMessagesCount }}</div>
                    </div>
                </ion-card-content>
            </ion-card>
        </ion-list>
        <div *ngIf="params.results.loader == true && users?.length > 3" class="loader"><img src="assets/img/loader.gif"></div>
        <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
            <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>
    </ion-content>
    <ion-footer>
    
      <ion-navbar>
        <ion-title></ion-title>
      </ion-navbar>
    
    </ion-footer>
    
